{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '49495202-279cad4ade428b3db0cc5c04a';\n\nexport async function getGallery(queryName, page = 1) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: queryName,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                per_page: 15,\n                page: page,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error(\"API error:\", error);\n        throw new Error('Oops! Something went wrong. Please try again later.');\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const refs = {\n    form: document.querySelector('.form'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    loadMoreBtn: document.querySelector('.load-more'),\n};\n\nconst lightbox = new SimpleLightbox('.gallery a', { captionDelay: 250, captionsData: 'alt' });\n\nfunction galleryTemplate(element) {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = element;\n    return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <ul class=\"gallery-body\">\n        <li class=\"gallery-info\">\n          <h3>Likes:</h3>\n          <p>${likes}</p>\n        </li>\n        <li class=\"gallery-info\">\n          <h3>Views:</h3>\n          <p>${views}</p>\n        </li>\n        <li class=\"gallery-info\">\n          <h3>Comments:</h3>\n          <p>${comments}</p>\n        </li>\n        <li class=\"gallery-info\">\n          <h3>Downloads:</h3>\n          <p>${downloads}</p>\n        </li>\n      </ul>\n    </li>`\n}\n\nexport function clearGallery() {\n    refs.gallery.innerHTML = '';\n}\n\nexport function renderGallery(elements) {\n    const markup = elements.hits.map(galleryTemplate).join('\\n');\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getGallery } from './js/pixabay-api';\nimport { renderGallery, clearGallery, refs } from './js/render-functions';\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nrefs.loader.style.display = 'none';\nrefs.loadMoreBtn.style.display = 'none';\n\nfunction smoothScroll() {\n    const galleryItems = document.querySelectorAll('.gallery-item');\n    if (galleryItems.length > 0) {\n        const cardHeight = galleryItems[0].getBoundingClientRect().height;\n        window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    }\n}\n\nrefs.form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    currentQuery = e.target.elements['search-text'].value.trim();\n    currentPage = 1;\n\n    if (!currentQuery) {\n        iziToast.show({ message: 'Search query cannot be empty!', messageColor: 'white', backgroundColor: 'orange', position: 'topRight' });\n        return;\n    }\n\n    refs.loader.style.display = 'flex';  \n    refs.loadMoreBtn.style.display = 'none';\n    clearGallery();\n\n    try {\n        const data = await getGallery(currentQuery, currentPage);\n        if (data.hits.length === 0) {\n            iziToast.show({ message: 'No images found. Try again!', messageColor: 'white', backgroundColor: 'red', position: 'topRight' });\n        } else {\n            renderGallery(data);\n            if (data.totalHits > currentPage * 15) refs.loadMoreBtn.style.display = 'block';\n        }\n    } catch (error) {\n        iziToast.show({ message: error.message, messageColor: 'white', backgroundColor: 'red', position: 'topRight' });\n    } finally {\n        refs.loader.style.display = 'none';\n    }\n\n    e.target.reset();\n});\n\nrefs.loadMoreBtn.addEventListener('click', async () => {\n    currentPage++;\n    refs.loader.style.display = 'flex';  \n    refs.loadMoreBtn.style.display = 'none';\n\n    try {\n        const data = await getGallery(currentQuery, currentPage);\n        renderGallery(data);\n        smoothScroll();\n\n        if (data.totalHits > currentPage * 15) {\n            refs.loadMoreBtn.style.display = 'block';\n        } else {\n            iziToast.show({ message: 'No more images to load.', messageColor: 'white', backgroundColor: 'blue', position: 'topRight' });\n        }\n    } catch (error) {\n        iziToast.show({ message: error.message, messageColor: 'white', backgroundColor: 'red', position: 'topRight' });\n    } finally {\n        refs.loader.style.display = 'none';\n    }\n});\n"],"names":["BASE_URL","API_KEY","getGallery","queryName","page","axios","error","refs","lightbox","SimpleLightbox","galleryTemplate","element","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","renderGallery","elements","markup","currentPage","currentQuery","smoothScroll","galleryItems","cardHeight","iziToast","data"],"mappings":"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"}